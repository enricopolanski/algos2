import { listen } from '../src/index';
import * as net from 'net';

jest.mock('net');
const mockedNet = net as jest.Mocked<typeof net>;

it('should fail', () => {
  mockedNet.createServer.mockReturnValue({
    on: jest.fn(),
    listen: jest.fn(),
    close: jest.fn(),
    address: jest.fn(),
    getConnections: jest.fn(),
    ref: jest.fn(),
    unref: jest.fn(),
    maxConnections: 0,
    connections: 0,
    listening: false,
    addListener: jest.fn(),
    emit: jest.fn(),
    once: jest.fn(),
    prependListener: jest.fn(),
    prependOnceListener: jest.fn(),
    removeListener: jest.fn(),
    removeAllListeners: jest.fn(),
    setMaxListeners: jest.fn(),
    off: jest.fn(),
    getMaxListeners: jest.fn(),
    listeners: jest.fn(),
    rawListeners: jest.fn(),
    listenerCount: jest.fn(),
    eventNames: jest.fn(),
  });
  listen();
});
